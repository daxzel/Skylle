<!DOCTYPE html>
<html>
<head>
    <title>Instalogger</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="/static/images/instalogger.ico" itemprop="image">
    <link rel="shortcut icon" href="/static/images/instalogger.ico">
    <link href="static/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="static/css/instalogger.css" rel="stylesheet" media="screen">
    <link href="static/css/font-awesome.css" rel="stylesheet">
    <!--<script src="static/js/jquery.js"></script>-->
    <!--<script src="static/js/ZeroClipboard.min.js"></script>-->
    <!--<script src="static/js/sockjs.js"></script>-->
    <!--<script src="static/js/angular.min.js"></script>-->
    <!--<script src="static/js/vertxbus-2.1.js"></script>-->
    <!--<script src="static/js/angular-sanitize.min.js"></script>-->
    <!--<script src="static/js/angular-animate.min.js"></script>-->
    <!--<script src="static/js/angular-resource.min.js"></script>-->
    <!--<script src="static/js/angular-clip.js"></script>-->
    <!--<script src="static/js/ui-bootstrap.min.js"></script>-->
    <!--<script src="static/js/tinycon.min.js"></script>-->
    <script src="static/js/all.js"></script>
</head>
<body ng-app="instaloggerApp">
<div class="instalogger-main-container" ng-controller="messagesController">
    <script type="text/ng-template" id="connectionLost.html">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body">
                    <h2><p class="text-danger">Connection to the server lost</p></h2>
                </div>
                <div class="modal-footer">
                    <a class="btn btn-primary" href="/">Reload</a>
                </div>
            </div>
        </div>
    </script>

    <script type="text/ng-template" id="nameDialog.html">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Adding repeated messages</h3>
                </div>
                <div class="modal-body">
                    <input type="text" class="form-control" placeholder="Name" ng-model="name">
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" ng-click="ok(name)">OK</button>
                    <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
                </div>
            </div>
        </div>
    </script>


    <div class="instalogger-fluid-container instalogger-controls instalogger-controls-fixed">
        <div class="btn-group btn-group-sm pull-left">
            <button ng-repeat="logLevel in logLevels" type="button"
                    ng-class="{'instalogger-not-active': !logLevel.show}"
                    class="btn btn-default {{logLevel.buttonStyle}}" ng-click="changeConfig(logLevel)">
                {{logLevel.buttonName}}
            </button>
        </div>
        <button type="button" class="btn btn-default btn-sm pull-right"
                ng-show="unreadErrorMessages.length > 0"
                ng-click="readAll()">
            <span class="glyphicon glyphicon-check"></span>Read all
        </button>

        <div class="input-group instalogger-search input-group-sm">
            <input type="text" class="form-control" placeholder="Search..." ng-model="searchText"
                   ng-change="searchTextChanged(searchText)">
            <span class="input-group-addon"><span class="glyphicon glyphicon-search"/></span>
        </div>
    </div>

    <div class="instalogger-fluid-container instalogger-fluid-message-container" scroll>
        <div class="instalogger-panel-row">
            <div class="panel panel-default instalogger-panel-message" ng-repeat="server in servers">
                <div class="panel-heading instalogger-panel-server-heading">
                    <span><server-ping server="server"/></span>
                    <i class="fa fa-refresh fa-spin" ng-show="server.refresh"></i>
                    {{server.name}}
                    <button type="button" class="btn btn-default btn-xs pull-right" ng-click="clearServer(server)">
                        <span class="glyphicon glyphicon-trash"></span>
                    </button>

                    <div class="btn-group btn-group-xs instalogger-repeated-message"
                         ng-repeat="repeatedMessage in repeatedMessages">
                        <button type="button" class="btn btn-default
                            btn-xs instalogger-unclickable-button instalogger-repeated-message-count">
                            {{repeatedMessage.count}}
                        </button>
                        <button type="button" class="btn btn-default btn-xs instalogger-unclickable-button">
                            {{repeatedMessage.name}}
                        </button>
                        <button type="button" class="btn btn-default btn-xs"
                                ng-click="removeRepeatedMessage(repeatedMessage)">
                            <i  class="fa fa-times"></i>
                        </button>
                    </div>
                </div>
                <div class="panel-body instalogger-message-panel-body" instalogger-scroll="messageScroll(server)">
                    <div id="{{ 'outer-' + server.id }}" style="overflow-y:hidden;">
                        <div id="{{ 'message-' + message.id }}" ng-mouseover="overMessage(message)"
                             ng-repeat="message in server.messages" class="alert"
                             ng-class="getClassOfAlert(message)">

                            <div class="btn-group btn-group-xs">
                                <button type="button" class="btn btn-default btn-xs" clip-copy="message.text"
                                        ng-show="isError(message)">
                                    <span class="fa fa-clipboard"/>Copy
                                </button>

                                <button type="button" class="btn btn-default btn-xs"
                                        ng-click="addRepeatedMessage(message)">
                                    <span class="fa fa-unlock-alt"/>Repeated
                                </button>
                            </div>


                            <span class="label label-danger instalogger-unread-label" ng-show="isUnread(message)">
                                <span class="glyphicon glyphicon-eye-close"></span>
                                Unread
                            </span>
                            <span class="instalogger-message-text"><log-message message="message"/></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>
